<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>API Automation Execution Dashboard</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body{
    margin:0;
    font-family:Arial,Helvetica,sans-serif;
    background:#e6f2ff;
    position:relative;
    color:#003366;
}
.page{
    position:relative;
    z-index:10;
    padding:20px 0 40px 0;
    text-align:center;
}

/* Left to Right Sliding Watermark */
.watermark{
    position:fixed;
    top:50%;
    left:0;
    transform:translateY(-50%);
    opacity:0.15;
    width:100%;
    height:100%;
    background:url('logo/Watermark.png') center/40% no-repeat;
    animation:slideWatermark 10s linear infinite;
    z-index:0;
    pointer-events:none;
}

@keyframes slideWatermark{
    0%   { transform: translate(-50%, -50%); }
    50%  { transform: translate(50%, -50%); }
    100% { transform: translate(-50%, -50%); }
}

/* Header */
.header-row{
    display:flex;
    align-items:center;
    justify-content:center;
    gap:25px;
    margin-bottom:10px;
}
.logo{
    position:absolute;
    top:15px;
    left:25px;
}
.logo img{
     height:150px; 
    width:auto;
}
.title{
    font-size:28px;
    font-weight:bold;
    color:#002b5c;
}
.subtitle{
    font-size:13px;
    color:#00509e;
    margin-top:4px;
}

/* Stats Cards */
.stats{
    display:flex;
    justify-content:center;
    gap:18px;
    margin:22px auto 8px auto;
}
.card{
    min-width:140px;
    padding:12px 22px;
    border-radius:24px;
    font-size:16px;
    font-weight:bold;
    color:#fff;
    box-shadow:0 4px 10px rgba(0,0,0,0.15);
    background:#999;
    transition:0.3s;
}
.card:hover{
    transform:scale(1.06);
    box-shadow:0 6px 16px rgba(0,0,0,0.25);
}
.p{background:#28a745;}
.f{background:#dc3545;}
.s{background:#ffc107;color:#333;}

/* API call count badges */
.callCounts{
    text-align:center;
    margin:10px auto 10px auto;
    font-size:14px;
    font-weight:bold;
}
.callCounts span{
    margin:0 8px;
    padding:4px 12px;
    border-radius:12px;
    background:#d9e6ff;
    border:1px solid #b3ccff;
}

/* Chart */
.chart-container{
    width:320px;
    margin:18px auto 0 auto;
}

/* Table */
table{
    width:80%;
    margin:30px auto 0 auto;
    border-collapse:collapse;
    background:#fff;
    box-shadow:0 4px 16px rgba(0,0,0,0.12);
}
th, td{
    border:1px solid #cdd4e0;
    padding:9px 6px;
    font-size:14px;
    text-align:center;
}
th{
    background:#003366;
    color:#fff;
}
tr:nth-child(even){
    background:#f4f7ff;
}

.footer{
    margin-top:25px;
    font-size:14px;    /* ðŸ”¼ Increase here (was 11px earlier) */
    font-weight:bold;  /* ðŸ”¥ Bold Added */
    color:#004a99;     /* Strong professional navy blue */
    letter-spacing:0.6px;

}
/* ðŸ”¹ Summary Cards Style */
.summary-cards{
    display:flex;
    justify-content:center;
    gap:18px;
    margin:18px auto;
}
.summary-card{
    min-width:160px;
    padding:12px 20px;
    border-radius:18px;
    font-size:15px;
    font-weight:bold;
    background:#ffffff;
    box-shadow:0 4px 10px rgba(0,0,0,0.15);
    border-left:8px solid;
}
.summary-card.avg{border-color:#0d6efd;color:#004085;}
.summary-card.fast{border-color:#28a745;color:#155724;}
.summary-card.slow{border-color:#dc3545;color:#721c24;}

</style>

</head>
<body>

<div class="watermark">
    <img src="logo/company_logo.jpg" alt="logo">
</div>

<div class="page">

    <div class="logo">
        <img src="logo/company_logo.jpg" alt="Logo">
    </div>

    <div class="header-row">
        <div class="title">API Automation Execution Dashboard</div>
    </div>

    <div class="subtitle">Environment: DEV | Execution Mode: Single | Executed At: Today | Duration: 10 Sec</div>

    <div class="stats">
       <div class="card p">Passed: <span id="passCount">--</span></div>
       <div class="card f">Failed: <span id="failCount">--</span></div>
       <div class="card s">Skipped: <span id="skipCount">--</span></div>
    </div>

    <div class="callCounts">
        <span>POST: 2</span>
        <span>GET: 2</span>
        <span>PUT: 1</span>
        <span>DELETE: 1</span>
    </div>

    <!-- ðŸ”¹ API Performance Summary -->
    <div class="summary-cards">
        <div class="summary-card avg">Avg Response Time: <span id="avgTime">--</span> ms</div>
        <div class="summary-card fast">Fastest API: <span id="fastTime">--</span> ms</div>
        <div class="summary-card slow">Slowest API: <span id="slowTime">--</span> ms</span></div>
    </div>

    <div class="chart-container">
        <canvas id="pieChart"></canvas>
    </div>

    <div style="display:flex;justify-content:center;gap:20px;margin-top:35px;">
        <!-- Status Code Chart -->
        <div class="chart-container" style="width:420px;">
            <canvas id="statusChart"></canvas>
        </div>

        <!-- Execution Trend Chart -->
        <div class="chart-container" style="width:420px;">
            <canvas id="trendChart"></canvas>
        </div>
    </div>

    <!-- ðŸ”¹ Dynamic Test Case Result Table -->
    <table id="resultTable">
        <tr><th>Test Case ID</th><th>Action</th><th>Status</th></tr>
        <!-- Java will inject rows here -->
    </table>

    <div class="footer">
        Powered by Changepond Technologies | API QA Automation
    </div>

</div>

<script>
// Example Status Code Data - You will update these from Java later
var statusCodeLabels = ['200', '201', '204', '400', '404', '500'];
var statusCodeCounts  = [3, 1, 1, 0, 1, 0];


// Execution Trend Chart Data (Replace with Java generated values)
var runLabels = ["Run 1", "Run 2", "Run 3", "Run 4", "Run 5"];
var passTrend = [5, 6, 4, 7, 5];
var failTrend = [1, 0, 1, 0, 2];
var skipTrend = [0, 1, 0, 0, 0];

// ðŸ“ˆ Execution Trend Bar Chart
new Chart(document.getElementById('trendChart'), {
    type: 'bar',
    data: {
        labels: runLabels,
        datasets: [
            { label: "Passed", data: passTrend, backgroundColor: "#28a745" },
            { label: "Failed", data: failTrend, backgroundColor: "#dc3545" },
            { label: "Skipped", data: skipTrend, backgroundColor: "#ffc107" }
        ]
    },
    options: {
        responsive: true,
        plugins: { legend: { position: "bottom" } },
        scales: {
            y: { beginAtZero: true, title: { display: true, text: "Test Count" } },
            x: { title: { display: true, text: "Runs" } }
        }
    }
});

new Chart(document.getElementById('pieChart'), {
    type: 'doughnut',
    data: {
        labels: ['Passed', 'Failed', 'Skipped'],
        datasets: [{
            data: [5, 1, 0],
            backgroundColor: ['#28a745', '#dc3545', '#ffc107'],
            borderWidth: 1
        }]
    },
    options: {
        cutout: '60%',
        plugins: {
            legend: { position: 'bottom', labels: { color: '#003366', font: { size: 12 }}}
        },
        responsive: true
    }
});


// ðŸ”¹ Temporary sample values (replace using Java extraction later)
var responseTimes = [120, 98, 200, 350, 180]; 

var avg = Math.round(responseTimes.reduce((a,b)=>a+b,0) / responseTimes.length);
var min = Math.min(...responseTimes);
var max = Math.max(...responseTimes);

document.getElementById('avgTime').innerText = avg;
document.getElementById('fastTime').innerText = min;
document.getElementById('slowTime').innerText = max;


// ðŸ“Š Status Code Bar Chart
new Chart(document.getElementById('statusChart'), {
    type: 'bar',
    data: {
        labels: statusCodeLabels,
        datasets: [{
            data: statusCodeCounts,
            backgroundColor: [
                '#28a745',
                '#17a2b8',
                '#0d6efd',
                '#ffc107',
                '#dc3545',
                '#6f42c1'
            ],
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            x: { title: { display: true, text: 'HTTP Status Codes' }},
            y: { title: { display: true, text: 'Count' }, beginAtZero: true }
        },
        plugins: {
            legend: { display: false }
        }
    }
});
</script>

</body>
</html>
